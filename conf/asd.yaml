exporters:
    clickhouselogsexporter:
        dsn: tcp://localhost:9000/signoz_logs
        timeout: 10s
        use_new_schema: true
    clickhousemetricswrite:
        endpoint: tcp://localhost:9000/signoz_metrics
        resource_to_telemetry_conversion:
            enabled: true
    clickhousemetricswrite/prometheus:
        endpoint: tcp://localhost:9000/signoz_metrics
    clickhousetraces:
        datasource: tcp://localhost:9000/signoz_traces
        use_new_schema: true
    signozclickhousemetrics:
        dsn: tcp://localhost:9000/signoz_metrics
extensions:
    health_check:
        endpoint: 0.0.0.0:13133
    pprof:
        endpoint: 0.0.0.0:1777
processors:
    batch:
        send_batch_max_size: 11000
        send_batch_size: 10000
        timeout: 10s
    resourcedetection:
        detectors:
            - env
            - system
        timeout: 2s
    signozspanmetrics/delta:
        aggregation_temporality: AGGREGATION_TEMPORALITY_DELTA
        dimensions:
            - default: default
              name: service.namespace
            - default: default
              name: deployment.environment
            - name: signoz.collector.id
            - name: service.version
            - name: browser.platform
            - name: browser.mobile
            - name: k8s.cluster.name
            - name: k8s.node.name
            - name: k8s.namespace.name
            - name: host.name
            - name: host.type
            - name: container.name
        dimensions_cache_size: 100000
        enable_exp_histogram: true
        latency_histogram_buckets:
            - 100us
            - 1ms
            - 2ms
            - 6ms
            - 10ms
            - 50ms
            - 100ms
            - 250ms
            - 500ms
            - 1000ms
            - 1400ms
            - 2000ms
            - 5s
            - 10s
            - 20s
            - 40s
            - 60s
        metrics_exporter: clickhousemetricswrite, signozclickhousemetrics
        metrics_flush_interval: 60s
receivers:
    otlp:
        protocols:
            grpc:
                endpoint: 0.0.0.0:4317
            http:
                endpoint: 0.0.0.0:4318
    prometheus:
        config:
            global:
                scrape_interval: 60s
            scrape_configs:
                - job_name: otel-collector
                  static_configs:
                    - labels:
                        job_name: otel-collector
                      targets:
                        - localhost:8889
service:
    extensions:
        - health_check
        - pprof
    pipelines:
        logs:
            exporters:
                - clickhouselogsexporter
            processors:
                - batch
            receivers:
                - otlp
        metrics:
            exporters:
                - clickhousemetricswrite
                - signozclickhousemetrics
            processors:
                - batch
            receivers:
                - otlp
        metrics/prometheus:
            exporters:
                - clickhousemetricswrite/prometheus
                - signozclickhousemetrics
            processors:
                - batch
            receivers:
                - prometheus
        traces:
            exporters:
                - clickhousetraces
            processors:
                - signozspanmetrics/delta
                - batch
            receivers:
                - otlp
    telemetry:
        logs:
            encoding: json
        metrics:
            address: 0.0.0.0:8888
        resource:
            service.instance.id: 950ee818-7442-436f-a1e9-6a0d8d37317d
